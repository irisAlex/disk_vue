<template>
  <div id="highlighted">
    <div class="container-fluid" id="main-container" style="width: 88%;">
      <div id="main-content" class="clearfix">
        <div id="page-content" class="clearfix">
          <div class="page-header position-relative">
            <div class="row-fluid">
              <div class="span6">
                <!-- <h1>DXSHJCSTKS_01-46_PDF.rar</h1>
                <div class="header_content">文件大小：296.24 M&nbsp; &nbsp;</div> -->
                <br>
                <div class="header_content">
                  文件: 免费&nbsp;&nbsp;&nbsp;上传时间：隐藏 </div>
                <br>
                <div class="header_content">
                  <br>
                  <!-- Baidu Button BEGIN -->
                  <!-- Baidu Button END -->
                </div>
              </div>

              <div class="pull-right">
                <!-- <a href="vip.php?m=500a8bCEPOtQrF8H9%2BIv4%2Ftua%2BSB6KPA8egyqD2inVJx6v3w3lGQ7EC7EhEQ4tZty7Xsqy%2Fk2sWyQD8S526DFO3NF0mMdJN5I9IXrg"
                onclick="return confirm('此功能为VIP专用，现在开通VIP？');" data-placement="bottom" data-rel="tooltip"
                class="btn btn-app btn-vip btn-mini" data-original-title="VIP用户请使用（迅雷）下载"><i
                  class="icon-download-alt bigger-160"></i>VIP下载1</a>
              <a href="vip.php?m=8bb9D%2F1wO%2B%2FCmaebddyWWB7bfQA9FxND%2B%2Fv269Nd6INDsui5YbOryrQkkgpferNhKNqVseU6ZGgd9clktt9iR%2F4NY3UZrkC6S46OoA"
                onclick="return confirm('此功能为VIP专用，现在开通VIP？');" data-placement="bottom" data-rel="tooltip"
                class="btn btn-app btn-vip btn-mini" data-original-title="VIP用户请使用（迅雷）下载"><i
                  class="icon-download-alt bigger-160"></i>VIP下载2</a>
              <a href="vip.php?m=6ffbkXjXZbCAW7d9eoLN9rEqTSXpipEf4ptpruo0g8SXS%2F6y4kGMZF%2Bl%2FG6YPDM2gN6LWQ0mXhL8Js2DUtGeUcIa%2Bqj7T29q%2F3Gbtw"
                onclick="return confirm('此功能为VIP专用，现在开通VIP？');" data-placement="bottom" data-rel="tooltip"
                class="btn btn-app btn-vip btn-mini" data-original-title="VIP用户请使用（迅雷）下载"><i
                  class="icon-download-alt bigger-160"></i>VIP下载3</a>
              <a href="vip.php?m=0df1b95OAts5hEzyWImijk0xnOlmzO6%2FASR8rzr885IvKnseRx2yvCgSEg2Nb5Z8jZGqnh%2B8cRpb%2BrnzCo16Uh%2BveiiLkg75PSn56A"
                onclick="return confirm('此功能为VIP专用，现在开通VIP？');" data-placement="bottom" data-rel="tooltip"
                class="btn btn-app btn-vip btn-mini" data-original-title="VIP用户请使用（迅雷）下载"><i
                  class="icon-download-alt bigger-160"></i>VIP下载4</a>
              <a href="vip.php?m=52ebDhvhzfLz6gSexlNWeeq3pExJ%2BnTNGNnGECCOt5OBCODl7ldvjOFGp0KE%2BVh1cnfXwW%2FaIevIWUv4sgDuFpgyzGeE9qoi%2BZGjSA"
                onclick="return confirm('此功能为VIP专用，现在开通VIP？');" data-placement="bottom" data-rel="tooltip"
                class="btn btn-app btn-vip btn-mini" data-original-title="VIP用户请使用（迅雷）下载"><i
                  class="icon-download-alt bigger-160"></i>VIP下载5</a> -->
                <!--<a href="vip.php?m=c72cgTh%2BE4RcxdrrzHBqBxsrX9c7e8YzlXAZBOjq1VvlZh%2BbZGkhT6LW9GkITP4uUc8AGU00OLybUd6ym4kVKbdk7mSjvinUxvVEvw" onclick="return confirm('此功能为VIP专用，现在开通VIP？');" data-placement="bottom" data-rel="tooltip" class="btn btn-app btn-vip btn-mini" data-original-title="VIP用户请使用（迅雷）下载"><i class="icon-download-alt bigger-160"></i>VIP下载6</a>-->

                <!-- <a href="javascript:void(0)" data-placement="bottom" data-rel="tooltip"
                class="btn btn-app btn-info btn-mini" onclick="ajerror('请登录后再进行操作。');"
                data-original-title="把此文件转存到我的网盘"><i class="icon-save bigger-160"></i>转存</a> -->
                <!--a title="" data-placement="bottom" data-rel="tooltip" class="btn btn-app btn-mini" href="javascript:favorite_alert()" data-original-title="关注，下次快速找到他"><i class="icon-heart-empty bigger-160"></i>关注</a-->

                <a title="" data-placement="bottom" data-rel="tooltip" class="btn btn-app btn-mini btn-warning"
                  href="javascript:void(0)" data-original-title="举报非法文件"><i
                    class="icon-warning-sign bigger-160"></i>举报</a>
              </div>
            </div>

          </div>

          <!--/page-header-->


          <div class="row-fluid">
            <div class="downpage_l">
              <div class="row-fluid">
                <div class="widget-box transparent">
                  <div class="widget-body">
                    <div class="widget-body-inner" style="display: block;">
                      <div>


                        <div id="down_link"><a href="javascript:void(0)" rel="nofollow" title="下载页面"
                            class="down_now" v-on:click="downData"><span></span></a></div>

                        <div class="clear"></div>
                      </div>
                      <div class="clear"></div>

                    </div>
                  </div><!-- /widget-body -->
                </div>
              </div>
              <div class="row-fluid">
                <table class="table table-bordered table-striped">
                  <thead class="thin-border-bottom">
                    <tr>
                      <th><i class="icon-caret-right blue"></i><span style="color:#E53333;">五大特权</span>
                      </th>
                      <th><i class="icon-caret-right blue"></i><span style="color:#E53333;">VIP会员</span>
                      </th>
                      <th class="hidden-480"><i class="icon-caret-right blue"></i><span style="color:#E53333;">免费会员</span>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="post in posts" :key="post.title">
                      <td>{{ post.title }}</td>
                      <td><span class="badge badge-success"><i class="icon-ok"></i></span>{{ post.vip }} </td>
                      <td><span class="badge badge-important"><i class="icon-remove"></i></span> {{ post.free }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="row-fluid">
                <a class="btn btn-warning btn-block" href="vip" target="_blank"><i class="icon-user"></i> 立即成为VIP会员</a>
              </div>

              <div class="row-fluid">
                <div class="widget-box transparent">
                  <div class="widget-header widget-header-flat">
                    <h4 class="lighter"><i class="icon-star orange"></i>文件描述</h4>
                  </div>

                  <div class="widget-body">
                    <div style="display: block;" class="widget-body-inner">
                      <div class="widget-main;" style="line-height:30px;">
                        暂时没有文件描述，如果您是文件上传者，请记得到“我的文件”添加文件描述信息噢 </div>
                    </div><!-- /widget-main -->
                  </div>
                </div><!-- /widget-body -->
              </div>
            </div>

            <div style="width: 330px; float:left;margin: 10px">
              <div class="clear"></div>
              <section class="features">
                <ul>
                  <li v-for="f in features" :key="f.title">
                    <a href="###" class="block">
                      <h5>{{ f.title }}</h5>
                      <p>{{ f.describe }}</p>
                      <div class="down" :id="f.down"></div>
                      <div class="up" :id="f.up" style="opacity: 1;"></div>
                    </a>
                  </li>
                </ul>
              </section>
              <br>
              <div>
              </div>

            </div>

          </div>
        </div>
        <div class="bottom-hint">
          <i class="icon"> </i><span style="color:#E53333;">严禁利用xunniun
            网盘上传、传播暴力恐怖、色情违法及侵犯他人合法权益的违法信息，如发现有以上形式的文件，我们鼓励用户对其进行举报！对于涉嫌上传违法作品的用户，将被取消用户资格，并若涉及法律纠纷的条件下保留对该用户行使配合相关部门进行取证的权益。</span>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
export default {
  name: "download",
  data() {
    return {
      posts: [
        { title: '下载特权', vip: '免费无限制下载', free: '每天可下载1次' },
        { title: '弹窗广告', vip: '完全去除', free: '有广告' },
        { title: '下载速度', vip: '多协程无限制超高速', free: '单协程下载' },
        { title: '下载工具', vip: '支持', free: '不支持' },
        { title: '存储空间', vip: '1TB永久空间', free: '无永久空间' }
      ],
      features: [
        { title: '智能下载，简单高速', describe: '淘汰眼花缭乱的下载节点，智能下载技术全面应用，更加简单，更加高速。', down: 'feature-1-b', up: 'feature-1-a' },
        { title: '全新界面，完美洁净', describe: 'HTML5界面引擎，遍布网盘的每一个角落，流畅与轻快更进一步。', down: 'feature-2-b', up: 'feature-2-a' },
        { title: '全新引擎，高效稳定', describe: '由内至外的全面升级和优化，大幅降低HTTP响应时间，响应迅速，智能新奇。', down: 'feature-3-b', up: 'feature-3-a' },
        { title: '最高单价，绝不扣量', describe: '万次下载最高1600元，保证不扣1分量。', down: 'feature-4-b', up: 'feature-4-a' },
        { title: '7x12小时客户服务', describe: '本站提供 7x12 客户服务，快速解决问题', down: 'feature-5-b', up: 'feature-5-a' },
        { title: '专业专注，不断进步', describe: '超过50项全新改变，熟悉而又新奇，专注云储存服务，依然简洁，更不简单。', down: 'feature-6-b', up: 'feature-6-a' }
      ],
     // downLink: '',
      randomNumber: 0
    };
  },
  filters: {
    timeStyle(createTime) {
      return String(createTime).match(/.{10}/)[0];
    },
  },
  methods: {
    downData(event) { 
      
      event.preventDefault();
      if (localStorage.getItem('token') == null) {
              ajerror("请先登陆在进行下载");
                $("#alertMsg").show();
              return
      } 
      this.$http({
        url: `/download_file?file_id=` + this.$route.params.id,
        method: 'get',
        data: null,
        headers: { // 添加自定义的 HTTP 头
          'Token': localStorage.getItem('token')          // 添加其他自定义头
        },
      })
        .then((res) => {
          if (res.status === 200) {
            const link = res.data.content.split('|')
            if (link.length <= 1) {
              ajerror("资源不存在");
              $("#alertMsg").show();
              return
            }
            this.randomNumber = Math.floor(Math.random() * 5) + 1
           // this.downLink = link[this.randomNumber]

            window.location.href = link[this.randomNumber];
          }
        })
        .catch(function (error) {
          ajerror("今天已经到达下载巅峰了，明天再来～～");
          $("#alertMsg").show();
          console.log(error);
        });
    },
    getFileName() {
      this.$http({
        url: 'http://www.xunniuwp.com/file-4223602.html',
        method: 'get',
        data: null
      })
        .then((res) => {
          console.log(res)
          // if (res.status === 200) {
          //   const link = res.data.content.split('|')
          //   this.downLink = link[1]
          //   console.log(link[1])
          // }
        })
        .catch(function (error) {
          console.log(error);
        });
    }
  },
  mounted() {
 //   this.downData()
    // this.getFileName()
  },
  beforeMount() {

  },
};
</script>

<style scoped>
.payment_list li {
  width: 145px;
  float: left;
}

.payment_list li img {
  width: 126px;
}

.center-me {
  text-align: center;
}
</style>